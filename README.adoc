:doctype: book
:toc: left
:toclevels: 3
:sectnums:
:icons: font
:source-highlighter: highlightjs
:idprefix:
:idseparator: -
:sectlinks:
:sectanchors:
:linkcss: false

:short-bonita-version: 10.2
:doc-url: https://documentation.bonitasoft.com/bonita/{short-bonita-version}
:java-version: 17
= bonita-connector-ai

The project **bonita-connector-ai** is a Bonita Connector for **Bonita {short-bonita-version}**  **Community** version written in `java` language.

// _**TODO**_: A brief description of your project, what it is used for and how does life get awesome when someone starts to use it.

This connector allow to interact with an LLM provider such as OpenAI by sending prompt and returning the output generated by AI.

[WARNING]
====
The connector is still under development and current state is just a draft version.
====

== Features

// _**TODO**_: What's all the bells and whistles this project can perform?

* Take a user prompt and send it to the AI provider return the AI response
* Enrich user prompt with the content of the last document of the process before requesting the AI provider

== Getting started

// _**TODO**_: A quick introduction of the minimal setup you need to get a hello world up & running.

To use this connector, add it as a dependency to your Bonita process.
For more details on Bonita Connector please refer to {doc-url}/connector-archetype[documentation]

[source,xml]
----
<dependency>
    <groupId>org.bonitasoft.connectors</groupId>
    <artifactId>bonita-connector-ai</artifactId>
    <version>...connector version here...</version>
</dependency>
----

=== Configuration

- url: The AI provider endpoint url
- apiKey: The AI provider API key
- modelName: The chat model to use (ex gpt-4o, gpt-4o-mini, ...)
- userPrompt: The user prompt content to send to the AI provider
// - systemPrompt: The system prompt content to send to the AI provider
- sourceDocumentRef: The reference to the process document to load and add to the user prompt.

== Developing
// _**TODO**_: Here's a brief introduction about what a developer must do in order to start developing the project further:

Prerequisite:

- Java ( **jdk {java-version}** or higher)
- Maven (optional if you chose to use https://github.com/takari/maven-wrapper[maven wrapper script] as archetype option)
- A Git client (optional but highly recommended)

=== Building
// _**TODO**_: If your project needs some additional steps for the developer to build the project after some code changes, state them here:
The project is a standard maven project. For more details about Apache Maven, please refer to the https://maven.apache.org/guides/getting-started/[documentation]

[source,bash]
----
git clone https://your.github.com/bonita-connector-ai.git
cd bonita-connector-ai/
./mwnw package
----

The build should produce a jar archive under the `target/` folder named `bonita-connector-ai-1.0.0-SNAPSHOT.jar`


=== Run integration tests

// _**TODO**_: Here again you should state what actually happens when the code above gets executed.

The connector needs an AI endpoint up & running. A docker compose file is present at the root folder. This docker compose file start
a https://localai.io/[localai] container that you can use as a local replacement of LLM providers. Just issue `docker compose up -d`
Because, on first start localai needs to download lots of model, it can take quite some time.

Once localai is ready, you can run integration tests using standard maven command and activating a dedicated maven profile (ITs)

`./mvnw verify -PITs`

=== Deploying / Publishing

// _**TODO**_: In case there's some step you have to take that publishes this project to a server, this is the right time to state it.

{doc-url}/managing-extension-studio[Install the connector in your Bonita project using the Studio, window = "_blank"].

// == Contributing
//
// // _**TODO**_: Make easy to your team to jump in and start contributing to your project.
//
// These paragraphs are meant to welcome those kind souls to feel that they are
// needed. You should state something like:
//
// "If you'd like to contribute, please fork the repository and use a feature
// branch. Pull requests are warmly welcome."
//
// If there's anything else the developer needs to know (e.g. the code style
// guide), you should link it here. If there's a lot of things to take into
// consideration, it is common to separate this section to its own file called
// `CONTRIBUTING.adoc` (or similar). If so, you should say that it exists here.

== Links

// _**TODO**_: Even though this information can be found inside the project on machine-readable
// format like in a .json file, it's good to include a summary of most useful
// links to humans using your project. You can include links like:

. Project homepage: https://your.github.com/awesome-project/
. Repository: https://github.com/your/awesome-project/
. Issue tracker: https://github.com/your/awesome-project/issues
// .. In case of sensitive bugs like security vulnerabilities, please contact
//     my@email.com directly instead of using issue tracker. We value your effort
//     to improve the security and privacy of this project!
